<!doctype html><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>System</title><link href=styles.css rel=stylesheet></head><body><div class=container><div class=sidebar><div class=menu-section><h3 class="menu-header active">Overview</h3><ul><li><a href=/>Overview</a></li><li><a href=/slaves.html>Slaves</a></li></ul></div><div class=menu-section><h3 class=menu-header>System</h3><ul><li><a href=/systems.html>System</a></li><li><a href=/modbus.html>Modbus</a></li><li><a class=active href=/mqtt.html>MQTT</a></li><li><a href=/mapping.html>Mapping</a></li></ul></div><div class=menu-section><h3 class=menu-header>Network</h3><ul><li><a href=/wifi.html>WiFi</a></li><li><a href=/wan.html>WAN</a></li><li><a href=/lan.html>LAN</a></li></ul></div><div class=menu-section><h3 class=menu-header>Other</h3><ul><li><a href=/other.html>Other</a></li></ul></div></div><div class=main-content><div class="content-section active" id=MQTT><h2>MQTT</h2><div class=comm-settings-content><form class=comm-form><div class=comm-socket-table><div class=comm-row><label>Host</label><input id=comm_host type=text></div><div class=comm-row><label>Port</label><input id=comm_port type=number></div><div class=comm-row><label>ID</label><input id=comm_id type=text></div><div class=comm-row><label>Username</label><input id=comm_user type=text></div><div class=comm-row><label>Password</label><input id=comm_pass type=text></div><div class=comm-row><label>Attribute Frequency</label><input id=comm_attrf type=number></div><div class=comm-row><label>Telemetry Frequency</label><input id=comm_telef type=number></div><div class=comm-row><label>Reconnect Frequency</label><input id=comm_reconnetf type=number></div></div><div style="justify-content: flex-end;" class=button-group><button class=save-btn id=save_btn type=button>Save</button><button class=reset-btn id=reset_btn type=button>Reset</button></div></form></div></div></div></div></body><script>const HOST_IP=window.location.host;const comm_host=document.getElementById(`comm_host`);const comm_port=document.getElementById(`comm_port`);const comm_id=document.getElementById(`comm_id`);const comm_user=document.getElementById(`comm_user`);const comm_pass=document.getElementById(`comm_pass`);const comm_attrf=document.getElementById(`comm_attrf`);const comm_telef=document.getElementById(`comm_telef`);const comm_reconnetf=document.getElementById(`comm_reconnetf`);const save_btn=document.getElementById(`save_btn`);const reset_btn=document.getElementById(`reset_btn`);const loading=()=>{fetch(`http://${HOST_IP}/api/mqtt`,{method:`GET`}).then(a=>a.json()).then(a=>{comm_host.value=a.host;comm_port.value=a.port;comm_id.value=a.id;comm_user.value=a.user;comm_pass.value=a.pass;comm_attrf.value=a.attrf;comm_telef.value=a.telef;comm_reconnetf.value=a.reconnect})};reset_btn.onclick=()=>loading();save_btn.onclick=()=>{fetch(`http://${HOST_IP}/api/mqtt`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({host:comm_host.value,port:comm_port.value,id:comm_id.value,user:comm_user.value,pass:comm_pass.value,attrf:comm_attrf.value,telef:comm_telef.value,reconnect:comm_reconnetf.value})}).then(a=>a.json()).then(a=>{alert(a.message)})};loading()</script></html>